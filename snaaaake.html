<!DOCTYPE html>
<html>
<head>
  <script src="https://cdn.jsdelivr.net/npm/phaser@3.15.1/dist/phaser-arcade-physics.min.js"></script>
</head>
<body>
    <script>
      var config = {
          type: Phaser.WEBGL,
          width: 800,
          height: 600,
          scene: {
              preload: preload,
              create: create,
              update: update
          }
      };
      var game = new Phaser.Game(config);

      var grid;
      var snake;
      var pellet;
      var cursors;

      var UP = 0;
      var DOWN = 1;
      var LEFT = 2;
      var RIGHT = 3;

      function preload()
      {
        this.load.image('snake', 'assets/snake.png')
      }

      function create()
      {
        grid = this.add.grid(0, 0, 1600, 1200, 20, 20, 0x000000, 1, 0xffffff, 0.5);
        var Snake = new Phaser.Class(
          {
            initialize:

             function Snake (scene, x, y)
             {
                 this.headPosition = new Phaser.Geom.Point(x, y);

                 this.body = scene.add.group();

                 this.head = this.body.create(x * 20, y * 20, 'snake');
                 this.head.setOrigin(0);

                 this.alive = true;

                 this.speed = 100;

                 this.moveTime = 0;

                 this.heading = RIGHT;
                 this.direction = RIGHT;
             },

             update: function (time)
             {
                 if (time >= this.moveTime)
                 {
                     return this.move(time);
                 }
             },

             faceLeft: function ()
             {
                 if (this.direction === UP || this.direction === DOWN)
                 {
                     this.heading = LEFT;
                 }
             },

             faceRight: function ()
             {
                 if (this.direction === UP || this.direction === DOWN)
                 {
                     this.heading = RIGHT;
                 }
             },

            faceUp: function ()
             {
                 if (this.direction === LEFT || this.direction === RIGHT)
                 {
                     this.heading = UP;
                 }
             },

             faceDown: function ()
             {
                 if (this.direction === LEFT || this.direction === RIGHT)
                 {
                     this.heading = DOWN;
                 }
             },

             move: function (time)
             {
               switch (this.heading)
              {
                    case LEFT:
                        this.headPosition.x = this.headPosition.x - 1
                        break;

                    case RIGHT:
                        this.headPosition.x = this.headPosition.x + 1
                        break;

                    case UP:
                        this.headPosition.y = this.headPosition.y - 1
                        break;

                    case DOWN:
                        this.headPosition.y = this.headPosition.y + 1
                        break;
              }

                 this.direction = this.heading;
                 Phaser.Actions.ShiftPosition(this.body.getChildren(), this.headPosition.x * 20, this.headPosition.y * 20, 1);
                 this.moveTime = time + this.speed;

                 return true;
             }

         });

         snake = new Snake(this, 1, 1);

         cursors = this.input.keyboard.createCursorKeys();
     }

     function update (time, delta)
     {
         if (!snake.alive)
         {
             return;
         }

         if (cursors.left.isDown)
         {
             snake.faceLeft();
         }
         else if (cursors.right.isDown)
         {
             snake.faceRight();
         }
         else if (cursors.up.isDown)
         {
             snake.faceUp();
         }
         else if (cursors.down.isDown)
         {
             snake.faceDown();
         }

         snake.update(time);
     }
    </script>
</body>
</html>
